{"ast":null,"code":"import axios from'axios';const baseURL=process.env.REACT_APP_API_BASE_URL||process.env.REACT_APP_API_URL||'https://localhost:4000';const api=axios.create({baseURL,withCredentials:true,// send/receive the httpOnly cookie when used\ntimeout:15000,headers:{'Content-Type':'application/json'}});// Attach bearer token from localStorage when available\napi.interceptors.request.use(cfg=>{try{const token=localStorage.getItem('token');if(token)cfg.headers.Authorization=\"Bearer \".concat(token);}catch(e){// ignore\n}return cfg;},e=>Promise.reject(e));// Normalize response errors to a predictable payload\napi.interceptors.response.use(r=>r,e=>{var _e$response;const payload=(e===null||e===void 0?void 0:(_e$response=e.response)===null||_e$response===void 0?void 0:_e$response.data)||{message:(e===null||e===void 0?void 0:e.message)||'Network error'};return Promise.reject(payload);});export default api;","map":{"version":3,"names":["axios","baseURL","process","env","REACT_APP_API_BASE_URL","REACT_APP_API_URL","api","create","withCredentials","timeout","headers","interceptors","request","use","cfg","token","localStorage","getItem","Authorization","concat","e","Promise","reject","response","r","_e$response","payload","data","message"],"sources":["C:/Users/grave/apds7311-secure-portal/client/src/api/axios.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst baseURL = process.env.REACT_APP_API_BASE_URL || process.env.REACT_APP_API_URL || 'https://localhost:4000';\r\n\r\nconst api = axios.create({\r\n  baseURL,\r\n  withCredentials: true, // send/receive the httpOnly cookie when used\r\n  timeout: 15000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Attach bearer token from localStorage when available\r\napi.interceptors.request.use(cfg => {\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n    if (token) cfg.headers.Authorization = `Bearer ${token}`;\r\n  } catch (e) {\r\n    // ignore\r\n  }\r\n  return cfg;\r\n}, e => Promise.reject(e));\r\n\r\n// Normalize response errors to a predictable payload\r\napi.interceptors.response.use(\r\n  r => r,\r\n  e => {\r\n    const payload = e?.response?.data || { message: e?.message || 'Network error' };\r\n    return Promise.reject(payload);\r\n  }\r\n);\r\n\r\nexport default api;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB,EAAIF,OAAO,CAACC,GAAG,CAACE,iBAAiB,EAAI,wBAAwB,CAE/G,KAAM,CAAAC,GAAG,CAAGN,KAAK,CAACO,MAAM,CAAC,CACvBN,OAAO,CACPO,eAAe,CAAE,IAAI,CAAE;AACvBC,OAAO,CAAE,KAAK,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CAEF;AACAJ,GAAG,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,GAAG,EAAI,CAClC,GAAI,CACF,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAED,GAAG,CAACJ,OAAO,CAACQ,aAAa,WAAAC,MAAA,CAAaJ,KAAK,CAAE,CAC1D,CAAE,MAAOK,CAAC,CAAE,CACV;AAAA,CAEF,MAAO,CAAAN,GAAG,CACZ,CAAC,CAAEM,CAAC,EAAIC,OAAO,CAACC,MAAM,CAACF,CAAC,CAAC,CAAC,CAE1B;AACAd,GAAG,CAACK,YAAY,CAACY,QAAQ,CAACV,GAAG,CAC3BW,CAAC,EAAIA,CAAC,CACNJ,CAAC,EAAI,KAAAK,WAAA,CACH,KAAM,CAAAC,OAAO,CAAG,CAAAN,CAAC,SAADA,CAAC,kBAAAK,WAAA,CAADL,CAAC,CAAEG,QAAQ,UAAAE,WAAA,iBAAXA,WAAA,CAAaE,IAAI,GAAI,CAAEC,OAAO,CAAE,CAAAR,CAAC,SAADA,CAAC,iBAADA,CAAC,CAAEQ,OAAO,GAAI,eAAgB,CAAC,CAC/E,MAAO,CAAAP,OAAO,CAACC,MAAM,CAACI,OAAO,CAAC,CAChC,CACF,CAAC,CAED,cAAe,CAAApB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}